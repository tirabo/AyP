
<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>11. Invariantes &#8212; Algoritmos y Programación</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.4cbf315f70debaebd550c87a6162cf0f.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '11_Invariantes_Desarrollos_en_base_b';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="12. Recursión" href="12_Recursion.html" />
    <link rel="prev" title="10. Dicionarios y conjuntos" href="10_Diccionarios_y_conjuntos.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="00_Introduccion.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="Algoritmos y Programación - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="Algoritmos y Programación - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="00_Introduccion.html">
                    Algoritmos y Programación: introducción
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Dibujando con Turtle</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="01_Dibujando_con_Python_Turtle.html">1. Dibujando con Python turtle</a></li>
<li class="toctree-l1"><a class="reference internal" href="02_Mas_dibujos_con_Turtle.html">2. Practicando con Turtle</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_Variables_Funciones_en_Turtle.html">3. Variables y funciones aplicadas a Turtle</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Aprendiendo lo básico</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="04_Primeros_pasos_en_Python.html">4. Primeros pasos con Python</a></li>

<li class="toctree-l1"><a class="reference internal" href="05_Funciones.html">5. Funciones</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_Condicionales.html">6. Condicionales</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_Ciclos.html">7. Ciclos</a></li>
<li class="toctree-l1"><a class="reference internal" href="08_Cadenas.html">8. Cadenas</a></li>
<li class="toctree-l1"><a class="reference internal" href="09_Listas_y_tuplas.html">9. Listas y tuplas</a></li>
<li class="toctree-l1"><a class="reference internal" href="10_Diccionarios_y_conjuntos.html">10. Dicionarios y conjuntos</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">11. Invariantes</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Recursión</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="12_Recursion.html">12. Recursión</a></li>
<li class="toctree-l1"><a class="reference internal" href="13_Recursion_%28continuacion%29.html">13. Recursión (2° parte)</a></li>
<li class="toctree-l1"><a class="reference internal" href="13.1_Numeros_notables.html">13.1 Los números notables (optativa)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Clases y objetos</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="14_Clases_y_objetos.html">14. Clases y objetos</a></li>
<li class="toctree-l1"><a class="reference internal" href="15_Clases_y_objetos_ejemplos.html">15. Clases y objetos: ejemplos</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Input y output</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="16_Input_y_output.html">16. Input y output</a></li>

<li class="toctree-l1"><a class="reference internal" href="17_Archivos_CSV_XML_JSON_APIs.html">17. Interacción con archivos CSV, XML y JSON</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Numpy y Pyplot</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="18_NumPy.html">18. Introducción a NumPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="19_PyPlot.html">19. Introducción a Matplotlib</a></li>
<li class="toctree-l1"><a class="reference internal" href="19.1_Ejemplo_recorridos_GPX.html">19. 1 Análisis y graficación de recorridos GPX (optativa)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Apéndices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="20.0_Ejercicios_resueltos.html">Ejercicios resueltos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="20.1_Python_turtle.html">1. Dibujando con la tortuga</a></li>
<li class="toctree-l2"><a class="reference internal" href="20.2_Expresiones_funciones_condicionales.html">2. Expresiones, funciones y condicionales</a></li>
<li class="toctree-l2"><a class="reference internal" href="20.3_Ciclos_fechas.html">3. Ciclos, tratamiento de fechas</a></li>
<li class="toctree-l2"><a class="reference internal" href="20.4_Cadenas_listas_diccionarios_conjuntos.html">4. Cadenas, listas, diccionarios y conjuntos</a></li>
<li class="toctree-l2"><a class="reference internal" href="20.5_Recursion.html">5. Recursión</a></li>
<li class="toctree-l2"><a class="reference internal" href="20.6_Clases_objetos.html">6. Tipos abstractos de datos (clases)</a></li>
<li class="toctree-l2"><a class="reference internal" href="20.7_Entrada_y_salida.html">7. Lectura y escritura de archivos</a></li>
</ul><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2F11_Invariantes_Desarrollos_en_base_b.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/11_Invariantes_Desarrollos_en_base_b.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>11. Invariantes</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">11. Invariantes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#razonando-sobre-programas-correccion-parcial">1. Razonando sobre programas: Corrección parcial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">2. Invariantes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-es-primo">3. Ejemplo: ¿es primo?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-maximo-comun-divisor">4. Ejemplo: máximo común divisor</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#algoritmo-de-euclides">Algoritmo de Euclides</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#desarrollo-en-base-b-ge-2-de-numeros-enteros">Desarrollo en base <span class="math notranslate nohighlight">\(b \ge 2\)</span> de números enteros</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#desarrollo-en-base-b-ge-2-de-numeros-decimales">Desarrollo en base <span class="math notranslate nohighlight">\(b \ge 2\)</span> de números decimales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#series-de-taylor-para-la-exponencial">Series de Taylor para la exponencial</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="invariantes">
<h1>11. Invariantes<a class="headerlink" href="#invariantes" title="Permalink to this heading">#</a></h1>
<section id="razonando-sobre-programas-correccion-parcial">
<h2>1. Razonando sobre programas: Corrección parcial<a class="headerlink" href="#razonando-sobre-programas-correccion-parcial" title="Permalink to this heading">#</a></h2>
<p>¿Cómo podemos convencernos de que un programa es correcto? Es decir que hace lo que queremos que haga.</p>
<p>Poe ejemplo, proponemos el siguiente código para calcular el cuadrado de un número.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">cuadrado</span><span class="p">(</span><span class="n">n</span> <span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: n es un entero</span>
    <span class="c1"># post: devuelve el cuadrado de n</span>
    <span class="c1"># n ** 2 es el cuadrado de n</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">n</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="c1"># res es el cuadrado de n</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
</div>
<p>Observaciones:</p>
<ul class="simple">
<li><p>Si las variables que aparecen en una afirmación verdadera antes de una línea de código no se modifican en esa línea de código, la misma afirmación sigue siendo verdadera luego de la línea de código.</p></li>
<li><p>Si antes de la asignación <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">e</span></code> vale una afirmación <span class="math notranslate nohighlight">\(A(e)\)</span>, entonces luego de la asignación vale la afirmación <span class="math notranslate nohighlight">\(A(x)\)</span>.</p></li>
</ul>
<p>Verifiquemos  que el programa escrito en la celda de código  anterior hace lo que queremos que haga.</p>
<ol class="arabic simple">
<li><p>La precondición no se demuestra, se asume que es verdadera cuando comienza la ejecución de la función (será responsabilidad de quien use la función, asegurarse de que se cumpla su precondición)</p></li>
<li><p>La precondición <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">es</span> <span class="pre">un</span> <span class="pre">entero</span></code> implica <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">**</span> <span class="pre">2</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">cuadrado</span> <span class="pre">de</span> <span class="pre">n</span></code>. De hecho esta afirmación simplemente está diciendo que en Python <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">**</span> <span class="pre">2</span></code> es lo que habitualmente escribimos <span class="math notranslate nohighlight">\(n^2\)</span> en matemática. Por lo tanto, la afirmación <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">**</span> <span class="pre">2</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">cuadrado</span> <span class="pre">de</span> <span class="pre">n</span></code> es verdadera en la línea 4.</p></li>
<li><p>Por ello, luego de la asignación <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">=</span> <span class="pre">n</span> <span class="pre">**</span> <span class="pre">2</span></code>, la afirmación <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">cuadrado</span> <span class="pre">de</span> <span class="pre">n</span></code> es verdadera, ya que la variable <code class="docutils literal notranslate"><span class="pre">res</span></code> tiene ahora justamente el valor de la expresión <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">**</span> <span class="pre">2</span></code>. Por lo tanto, si <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">**</span> <span class="pre">2</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">cuadrado</span> <span class="pre">de</span> <span class="pre">n</span></code> es verdadera en la línea 4, entonces <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">cuadrado</span> <span class="pre">de</span> <span class="pre">n</span></code> es verdadera en la línea 6.</p></li>
<li><p>Por último, si en la línea 6 vale <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">cuadrado</span> <span class="pre">de</span> <span class="pre">n</span></code>, entonces efectivamente se cumple la postcondición ya que en la fila siguiente se está devolviendo justamente el cuadrado de <code class="docutils literal notranslate"><span class="pre">n</span></code>.</p></li>
</ol>
<p>¿Qué hemos demostrado? Hemos demostrado que si se cumple la precondición cuando se llama a la función, entonces se va a cumplir la postcondición cuando la misma finalice.</p>
<p>No profundizaremos en la corrección parcial de programas en este curso. Es un tema muy amplio que excede los alcances de la materia. La demostración anterior se presenta como ejemplo de que es posible demostrar el funcionamiento correcto de programas.</p>
</section>
<section id="id1">
<h2>2. Invariantes<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<p>Demostrar la corrección de un programa que no tiene ciclos es sencillo y hay algoritmos que son capaces de hacerlo. Cuando introducimos ciclos, demostrar un programa deja de ser una tarea rutinaria y tiene intrínsecamente la misma dificultad que demostrar un teorema en matemática.</p>
<p>Como ya dijimos no profundizaremos en este tema, pero sí es interesante estudiar una herramienta para demostrar la corrección de programas que son los los <em>invariantes</em> de los ciclos <code class="docutils literal notranslate"><span class="pre">while</span></code>. Un invariante nos puede ayudar a razonar sobre el ciclo y descubrir si lo estamos implementando bien o mal.</p>
<p>Razonar sobre el ciclo <code class="docutils literal notranslate"><span class="pre">while</span></code> requiere identificar un <em>invariante</em>. Un invariante es una afirmación que vale antes de entrar al <code class="docutils literal notranslate"><span class="pre">while</span></code> y al final de cada ejecución del cuerpo del <code class="docutils literal notranslate"><span class="pre">while</span></code>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># invariante
while condición:
    cuerpo del ciclo
    # invariante
</pre></div>
</div>
<p>Para demostrar que una afirmación es un invariante, debemos demostrar</p>
<ol class="arabic simple">
<li><p>que vale antes del <code class="docutils literal notranslate"><span class="pre">while</span></code>:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="c1"># invariante</span>
    <span class="k">while</span> <span class="n">condición</span><span class="p">:</span>
        <span class="n">cuerpo</span> <span class="k">del</span> <span class="n">ciclo</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>que la afirmación vale al finalizar el cuerpo de cada ciclo</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>    <span class="k">while</span> <span class="n">condición</span><span class="p">:</span>
        <span class="n">cuerpo</span> <span class="k">del</span> <span class="n">ciclo</span>
        <span class="c1"># invariante</span>
</pre></div>
</div>
<p>Observemos  que como el invariante se verifica al terminar el cuerpo  de cada ciclo, al fallar la condición del <code class="docutils literal notranslate"><span class="pre">while</span></code> el ciclo termina y el invariante sigue valiendo. Es decir,  el invariante es verdadero al finalizar el ciclo o, más formalmente <code class="docutils literal notranslate"><span class="pre">invariante</span> <span class="pre">==</span> <span class="pre">True</span> <span class="pre">and</span> <span class="pre">condicion</span> <span class="pre">==</span> <span class="pre">False</span></code>.</p>
<p>Veamos un ejemplo de invariante analizando la siguiente implementación de la función factorial:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span> <span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: n es un número entero no negativo</span>
    <span class="c1"># post: devuelve el factorial de n, es decir, 1 * 2 * 3 * ... * n</span>
    <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span> <span class="c1"># res es el factorial de i - 1</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span> <span class="c1"># res es el factorial de i - 1</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">factorial</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1 1
2 2
3 6
4 24
5 120
6 720
7 5040
8 40320
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>40320
</pre></div>
</div>
</div>
</div>
<p>Observemos que cuando hacemos el algoritmo anterior la idea es que <code class="docutils literal notranslate"><span class="pre">res</span></code> vaya tomando el valor del producto de todos los números anteriores a <code class="docutils literal notranslate"><span class="pre">i</span></code> y el invariante refleja esto: parte del invariante será la expresión <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">==</span> <span class="pre">1</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">...</span> <span class="pre">*</span> <span class="pre">(i</span> <span class="pre">-</span> <span class="pre">1)</span></code> . Por otro  lado, otra propiedad invariante es <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">&lt;=</span> <span class="pre">i</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">+</span> <span class="pre">1</span></code>, proponemos entonces</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>invariante: res == 1 * 2 * ... * (i - 1) and 2 &lt;= i &lt;= n + 1
</pre></div>
</div>
<p>Reescribimos la función agregando el invariante como comentario:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span> <span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: n es un número entero, n &gt;= 1</span>
    <span class="c1"># post: devuelve el factorial de n, es decir, 1 * 2 * 3 * ... * n</span>
    <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="c1"># 1. invariante: res == 1 * 2 * ... * (i - 1) and 2 &lt;= i &lt;= n + 1 (res = 1, i = 2)</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="c1"># 2. invariante: res == 1 * 2 * ... * (i - 1) and 2 &lt;= i &lt;= n + 1</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
</div>
<p>Podemos comprobar que el invariante es verdadero en los dos lugares donde lo hemos incluido.</p>
<ol class="arabic simple">
<li><p>Como <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">==</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">==</span> <span class="pre">2</span></code>, es claro que <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">==</span> <span class="pre">1</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">...</span> <span class="pre">*</span> <span class="pre">(i</span> <span class="pre">-</span> <span class="pre">1)</span></code> y <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">&lt;=</span> <span class="pre">i</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">+</span> <span class="pre">1</span></code>.</p></li>
<li><p>Sean <code class="docutils literal notranslate"><span class="pre">res0</span></code>, <code class="docutils literal notranslate"><span class="pre">i0</span></code> los valores de ingreso de <code class="docutils literal notranslate"><span class="pre">res</span></code>, <code class="docutils literal notranslate"><span class="pre">i</span></code> al ciclo <code class="docutils literal notranslate"><span class="pre">while</span></code>. Al finalizar el cuerpo del ciclo, <code class="docutils literal notranslate"><span class="pre">res</span></code>, <code class="docutils literal notranslate"><span class="pre">i</span></code> toman nuevos valores <code class="docutils literal notranslate"><span class="pre">res1</span> <span class="pre">=</span> <span class="pre">res0</span> <span class="pre">*</span> <span class="pre">i0</span></code>, <code class="docutils literal notranslate"><span class="pre">i1</span> <span class="pre">=</span> <span class="pre">i0</span> <span class="pre">+</span> <span class="pre">1</span></code>, luego <code class="docutils literal notranslate"><span class="pre">res1</span> <span class="pre">==</span> <span class="pre">res0</span> <span class="pre">*</span> <span class="pre">i0</span> <span class="pre">==</span> <span class="pre">1</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">...</span> <span class="pre">*</span> <span class="pre">(i0</span> <span class="pre">-</span> <span class="pre">1)</span> <span class="pre">*</span> <span class="pre">i0</span> <span class="pre">==</span> <span class="pre">1</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">...</span> <span class="pre">*</span> <span class="pre">(i1</span> <span class="pre">-</span> <span class="pre">1)</span></code>. Como <code class="docutils literal notranslate"><span class="pre">i0</span> <span class="pre">&lt;</span> <span class="pre">n</span></code>, pues pasó la condición del <code class="docutils literal notranslate"><span class="pre">while</span></code>, <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">&lt;=</span> <span class="pre">i1</span> <span class="pre">==</span> <span class="pre">i0</span> <span class="pre">+</span> <span class="pre">1</span> <span class="pre">&lt;=</span> <span class="pre">n</span> <span class="pre">+</span> <span class="pre">1</span></code>.</p></li>
</ol>
<p>Esta forma de escribir es para respetar lo que dijimos de que el invariante debe valer en dos lugares (antes del ciclo y al final del cuerpo del <code class="docutils literal notranslate"><span class="pre">while</span></code>). Si embargo,  sabiendo esto, es más conveniente, por claridad, escribir el invariante en un solo lugar.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">factorial</span><span class="p">(</span><span class="n">n</span> <span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: n es un número entero, n &gt;= 1</span>
    <span class="c1"># post: devuelve el factorial de n, es decir, 1 * 2 * 3 * ... * n</span>
    <span class="n">res</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="c1"># invariante: res == 1 * 2 * ... * (i - 1) and 2 &lt;= i &lt;= n + 1</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">res</span> <span class="o">*</span> <span class="n">i</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
</div>
<p>Lo interesante de este invariante es que al terminar el ciclo,  es decir al ser <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">==</span> <span class="pre">n</span> <span class="pre">+</span> <span class="pre">1</span></code> y  valer el invariante obtenemos el resultado  que buscábamos:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>res == 1 * 2 * ... * (i - 1) and i == n + 1  =&gt;  res ==  1 * 2 * ... * n       
</pre></div>
</div>
<p>En  general,  obtener el invariante no es sencillo pero una vez que nos damos cuenta cual es muy sencillo de verificar. Los invariantes interesantes son los que tienen la propiedad de  que cuando termina el ciclo el invariante es el resultado que buscábamos.</p>
<p>Veamos otro ejemplo,  encontremos el mínimo de una lista de enteros no vacía.</p>
<p>Esta función se puede implementar fácilmente con un <code class="docutils literal notranslate"><span class="pre">for</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">minimo</span><span class="p">(</span><span class="n">ns</span> <span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: ns es una lista de enteros no vacía</span>
    <span class="c1"># post: devuelve el menor de los enteros de la lista ns</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Error: ns no es una lista no vacía&quot;</span>
    <span class="n">menor</span> <span class="o">=</span> <span class="n">ns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">ns</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">ns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">menor</span><span class="p">:</span>
            <span class="n">menor</span> <span class="o">=</span> <span class="n">ns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">menor</span>

<span class="nb">print</span><span class="p">(</span><span class="n">minimo</span><span class="p">([</span><span class="mi">45</span><span class="p">,</span> <span class="mi">65</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">48</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>4
</pre></div>
</div>
</div>
</div>
<p>Pero para poder usar el invariante debemos trabajar con <code class="docutils literal notranslate"><span class="pre">while</span></code>. Como ya sabemos, todo <code class="docutils literal notranslate"><span class="pre">for</span></code> que itera sobre números enteros se puede implementar con un <code class="docutils literal notranslate"><span class="pre">while</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">minimo</span><span class="p">(</span><span class="n">ns</span> <span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: ns es una lista de enteros no vacía</span>
    <span class="c1"># post: devuelve el menor de los enteros de la lista ns</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;ns no es una lista no vacía&quot;</span>
    <span class="n">menor</span> <span class="o">=</span> <span class="n">ns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ns</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">menor</span><span class="p">:</span>
            <span class="n">menor</span> <span class="o">=</span> <span class="n">ns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">menor</span>
</pre></div>
</div>
</div>
</div>
<p>Observemos que en este caso cada vez que termina el cuerpo  del <code class="docutils literal notranslate"><span class="pre">while</span></code> se satisface que</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>menor es el menor elemento de ns[0:i] y 1 &lt;= i &lt;= len(ns)
</pre></div>
</div>
<p>y  este será nuestro invariante.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">minimo</span><span class="p">(</span><span class="n">ns</span> <span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: ns es una lista de enteros no vacía</span>
    <span class="c1"># post: devuelve el menor de los enteros de la lista ns</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;Error: ns no es una lista no vacía&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">ns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="c1"># invariante: res es el menor elemento de ns[0:i] y 1 &lt;= i &lt;= len(ns)</span>
    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ns</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">res</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="n">ns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
</div>
</div>
<p>Cuando termina el <code class="docutils literal notranslate"><span class="pre">while</span></code> obtenemos que <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">menor</span> <span class="pre">elemento</span> <span class="pre">de</span> <span class="pre">ns[0:len(ns)]</span></code> o equivalentemente <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">menor</span> <span class="pre">elemento</span> <span class="pre">de</span> <span class="pre">ns</span></code>,  que es el resultado deseado.</p>
<p><strong>Observación.</strong></p>
<ol class="arabic simple">
<li><p>En  el ejemplo del factorial el invariante podría haber sido  <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">==</span> <span class="pre">1</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">...</span> <span class="pre">*</span> <span class="pre">(i</span> <span class="pre">-</span> <span class="pre">1)</span></code>.</p></li>
<li><p>En  el ejemplo del mínimo el invariante podría haber sido <code class="docutils literal notranslate"><span class="pre">res</span> <span class="pre">es</span> <span class="pre">el</span> <span class="pre">menor</span> <span class="pre">elemento</span> <span class="pre">de</span> <span class="pre">ns[0:i]</span></code>.</p></li>
</ol>
<p>Estos dos invariantes garantizan que cuando se termine el ciclo obtenemos el resultado deseado. ¿Por  qué entonces agregamos las afirmaciones sobre el <code class="docutils literal notranslate"><span class="pre">i</span></code>? La respuesta es que las afirmaciones sobre <code class="docutils literal notranslate"><span class="pre">i</span></code> garantizan la finalización del ciclo, pues al estar el <code class="docutils literal notranslate"><span class="pre">i</span></code> acotado y en cada paso ser distinto,  nos garantizamos que el ciclo termina. Sin embargo, cuando nos resulte clara la finalización del ciclo, sólo dejaremos las afirmaciones que no sean de verificación de terminación de ciclo.</p>
</section>
<section id="ejemplo-es-primo">
<h2>3. Ejemplo: ¿es primo?<a class="headerlink" href="#ejemplo-es-primo" title="Permalink to this heading">#</a></h2>
<p>Recordemos que <span class="math notranslate nohighlight">\(n \geq 2\)</span>, entero, es primo, si y sólo si no existe ningún número entero <span class="math notranslate nohighlight">\(2 \leq d &lt; n\)</span> que divida a <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>Escribamos un algoritmo sencillo para detectar si un número es primo:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">es_primo</span><span class="p">(</span><span class="n">n</span> <span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="c1"># pre: n es un número entero &gt;= 2</span>
    <span class="c1"># post: devuelve True sii n es número primo</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Error: n no es un número entero &gt;= 2&quot;</span>
    <span class="n">es_primo</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">es_primo</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="n">es_primo</span>
</pre></div>
</div>
</div>
</div>
<p>Este es el algorimo más sencillo que se nos ocurre (quizás con un <code class="docutils literal notranslate"><span class="pre">break</span></code> es más intuitivo aún). Implementemos lo anterior con un <code class="docutils literal notranslate"><span class="pre">while</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">es_primo</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="c1"># pre: n &gt; 0</span>
    <span class="c1"># post: devuelve True si n  es primo, en caso contrario devuelve False</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Error: n no es un número entero &gt;= 2&quot;</span>
    <span class="n">es_primo</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">d</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="n">d</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">es_primo</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">es_primo</span>
</pre></div>
</div>
</div>
</div>
<p>Pero ya hemos visto que se puede hacer algo parecido, pero más eficiente y elegante:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">es_primo</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="c1"># pre: n &gt; 0</span>
    <span class="c1"># post: devuelve True si n  es primo, en caso contrario devuelve False</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Error: n no es un número entero &gt;= 2&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">while</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">%</span> <span class="n">d</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">d</span> <span class="o">==</span> <span class="n">n</span> <span class="c1"># d == n implica que n es primo</span>
</pre></div>
</div>
</div>
</div>
<p>¿Cuál es el invariante? o, mejor dicho, debemos encontrar un invariante que cumpla con lo que fue dicho en la sección 2 de este cuaderno.</p>
<p>Observemos  que para llegar al paso <code class="docutils literal notranslate"><span class="pre">d</span></code> y superar la condición del <code class="docutils literal notranslate"><span class="pre">while</span></code> el  número <code class="docutils literal notranslate"><span class="pre">d</span></code> y  todos los anteriores no dividen a <code class="docutils literal notranslate"><span class="pre">n</span></code>. Esa es la idea para proponer un invariante:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">es_primo</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="c1"># pre: n &gt; 0</span>
    <span class="c1"># post: devuelve True si n  es primo, en caso contrario devuelve False</span>
    <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">==</span> <span class="nb">int</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Error: n no es un número entero &gt;= 2&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="c1"># invariante: para todo j en  2 &lt;= j &lt;= d - 1, j no divide a n</span>
    <span class="k">while</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">%</span> <span class="n">d</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="c1"># invariante: para todo j en  2 &lt;= j &lt;= d - 1, j no divide a n</span>
    <span class="k">return</span> <span class="n">d</span> <span class="o">==</span> <span class="n">n</span> <span class="c1"># d == n implica que n es primo</span>
</pre></div>
</div>
</div>
</div>
<p>Podemos comprobar que el invariante es verdadero antes que comience el ciclo y cuando termina el cuerpo del ciclo.</p>
<ol class="arabic simple">
<li><p>Como <code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">==</span> <span class="pre">2</span></code> y <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>, es claro que para todo <code class="docutils literal notranslate"><span class="pre">j</span></code> en  <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">&lt;=</span> <span class="pre">j</span> <span class="pre">&lt;=</span> <span class="pre">1</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">%</span> <span class="pre">j</span> <span class="pre">!=</span> <span class="pre">0</span></code> (pues el conjunto es vacío).</p></li>
<li><p>Sea <code class="docutils literal notranslate"><span class="pre">d0</span></code> el valor de ingreso de <code class="docutils literal notranslate"><span class="pre">d</span></code> al ciclo <code class="docutils literal notranslate"><span class="pre">while</span></code>. Al finalizar el cuerpo del ciclo, <code class="docutils literal notranslate"><span class="pre">d</span></code> toma el valor <code class="docutils literal notranslate"><span class="pre">d1</span> <span class="pre">=</span> <span class="pre">d0</span> <span class="pre">+</span> <span class="pre">1</span></code>. Como originalmente para todo <code class="docutils literal notranslate"><span class="pre">j</span></code> en  <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">&lt;=</span> <span class="pre">j</span> <span class="pre">&lt;=</span> <span class="pre">d0</span> <span class="pre">-</span> <span class="pre">1</span></code>, cumple <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">%</span> <span class="pre">j</span> <span class="pre">!=</span> <span class="pre">0</span></code> y por pasar el ciclo <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">%</span> <span class="pre">d0</span> <span class="pre">!=</span> <span class="pre">0</span></code>, entonces para todo <code class="docutils literal notranslate"><span class="pre">j</span></code> tal que <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">&lt;=</span> <span class="pre">j</span> <span class="pre">&lt;=</span> <span class="pre">d0</span> <span class="pre">==</span> <span class="pre">d1</span> <span class="pre">-</span> <span class="pre">1</span></code>, se satisface  <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">%</span> <span class="pre">j</span> <span class="pre">!=</span> <span class="pre">0</span></code> y por lo tanto se cumple el invariante.</p></li>
</ol>
<p>Es claro entonces que la afirmación propuesta es un invariante. Cuando el ciclo termina puede ser por dos motivos:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">==</span> <span class="pre">n</span></code>: entonces el invariante nos dice que para todo <span class="math notranslate nohighlight">\(j\)</span> no divide a <span class="math notranslate nohighlight">\(n\)</span> con <span class="math notranslate nohighlight">\(2 \le j \le n-1\)</span>. Es decir, <span class="math notranslate nohighlight">\(n\)</span>  es primo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">&lt;</span> <span class="pre">n</span> <span class="pre">and</span> <span class="pre">n</span> <span class="pre">%</span> <span class="pre">d</span> <span class="pre">==</span> <span class="pre">0</span></code>: entonces el invariante nos dice que <span class="math notranslate nohighlight">\(j\)</span> no divide a <span class="math notranslate nohighlight">\(n\)</span> con <span class="math notranslate nohighlight">\(2 \le j \le d-1\)</span>, pero como <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">%</span> <span class="pre">d</span> <span class="pre">==</span> <span class="pre">0</span></code>, tenemos que <span class="math notranslate nohighlight">\(d|n\)</span> y <span class="math notranslate nohighlight">\(d &lt; n\)</span>. Es decir <span class="math notranslate nohighlight">\(n\)</span> no es primo.</p></li>
</ol>
<p>Concluyendo,  de lo anterior deducimos  que <code class="docutils literal notranslate"><span class="pre">d</span> <span class="pre">==</span> <span class="pre">n</span></code> es equivalente  a “<span class="math notranslate nohighlight">\(n\)</span> es primo”.</p>
</section>
<section id="ejemplo-maximo-comun-divisor">
<h2>4. Ejemplo: máximo común divisor<a class="headerlink" href="#ejemplo-maximo-comun-divisor" title="Permalink to this heading">#</a></h2>
<p>El  máximo común divisor de define de la siguiente manera.</p>
<p><strong>Definición.</strong>  Si <span class="math notranslate nohighlight">\(a\)</span> y <span class="math notranslate nohighlight">\(b\)</span> son enteros algunos de ellos no nulo, decimos que un entero no negativo <span class="math notranslate nohighlight">\(d\)</span> es un <em>máximo común divisor</em> o <em>mcd</em>, de <span class="math notranslate nohighlight">\(a\)</span> y <span class="math notranslate nohighlight">\(b\)</span> si</p>
<p>a) <span class="math notranslate nohighlight">\(d|a\)</span>  y <span class="math notranslate nohighlight">\(d|b\)</span>;</p>
<p>b) si <span class="math notranslate nohighlight">\( c|a \)</span> y <span class="math notranslate nohighlight">\(c|b\)</span> entonces <span class="math notranslate nohighlight">\(c | d\)</span>.</p>
<p>El máximo común divisor es el número más grande que es divisor común a <span class="math notranslate nohighlight">\(a\)</span> y <span class="math notranslate nohighlight">\(b\)</span>,  es decir:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
 \operatorname{mcd}(a,b) = \operatorname{max}\{d \in \mathbb N: d|a \wedge d|b\}.
\end{equation*}\]</div>
<p>Una forma de obtenerlo es encontrar todos los divisores comunes de <span class="math notranslate nohighlight">\(a\)</span> y <span class="math notranslate nohighlight">\(b\)</span> y  quedarse con el máximo. Esta no es una forma eficiente y para números grandes es imposible de aplicar.</p>
<p>La forma “correcta” de calcular el mcd es usando el <em>algoritmo de Euclides</em> y  la veremos más adelante.</p>
<p>Como primera aproximación para calcular el mcd usaremos el algoritmo explicado en un cuaderno previo que se basa en las siguientes propiedades: si <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>  son enteros,  con <span class="math notranslate nohighlight">\(y\)</span> no nulo,  entonces:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
&amp;a)&amp;\operatorname{mcd}(x, y) &amp;= \operatorname{mcd}(y - x, x) \\
&amp;b)&amp;\operatorname{mcd}(0, y) &amp;= y.
\end{align*}\]</div>
<p>Por lo tanto,  la idea para obtener el mcd es hacer restas hasta que uno de los dos argumentos de la función mcd alcance el 0 y obtener el mcd por la propiedad b). Una de las implementaciones es la siguiente:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: (a &gt;= 0 and b &gt;=0) and (a != 0 or b != 0).</span>
    <span class="c1"># post: devuelve el mdc de a y b</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># &quot;mientras x distinto de 0&quot;</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">x</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span>
</pre></div>
</div>
</div>
</div>
<p>o,  equivalentemente,</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: (a &gt;= 0 and b &gt;=0) and (a != 0 or b != 0).</span>
    <span class="c1"># post: devuelve el mdc de a y b</span>
    <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;=</span> <span class="n">b</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span>
    <span class="k">while</span> <span class="n">x</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># &quot;mientras x distinto de 0&quot;</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">x</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">x</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">-</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">y</span>
</pre></div>
</div>
</div>
</div>
<p>¿Cuál es el invariante del ciclo? Primero observemos que siempre <span class="math notranslate nohighlight">\(x \le y\)</span>, pero eso no ayuda mucho. Lo  que debemos observar, y no es del todo trivial,  es que por la propiedad a) tenemos que <span class="math notranslate nohighlight">\(\operatorname{mcd}(x, y) = \operatorname{mcd}(a, b)\)</span>, luego el invariante sería:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>invariante: x &lt;= y and mcd(x,y) = mcd(a,b)
</pre></div>
</div>
<p>Es claro que lo anterior es un invariante del ciclo y que cuando el ciclo termina, es decir  cuando <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">0</span></code>, tenemos:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mcd(x,y) = mcd(a,b) and x == 0
</pre></div>
</div>
<p>lo cual implica que</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mcd(a,b) = mcd(0,y) = y
</pre></div>
</div>
<p>Esto prueba que el ciclo es correcto y que el valor que se devuelve es el  mcd  entre <code class="docutils literal notranslate"><span class="pre">a</span></code> y <code class="docutils literal notranslate"><span class="pre">b</span></code>. La única consideración que habría que hacer es respecto a si el ciclo termina. Pero esto se puede verificar fácilmente pues en cada paso se hace una resta y  entonces uno de los argumentos del mcd va decreciendo. Luego de una cantidad suficiente de pasos llegaremos a que uno de los argumentos del mcd es 0 y  el ciclo termina.</p>
<section id="algoritmo-de-euclides">
<h3>Algoritmo de Euclides<a class="headerlink" href="#algoritmo-de-euclides" title="Permalink to this heading">#</a></h3>
<p>El algoritmo anterior es relativamente eficiente, pero lo es mucho más el <em>algoritmo de Euclides</em> que se basa en las siguientes propiedades: si <span class="math notranslate nohighlight">\(x\)</span>, <span class="math notranslate nohighlight">\(y\)</span>  son enteros no negativos,  con <span class="math notranslate nohighlight">\(y\)</span> no nulo,  entonces:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
&amp;a)\text{ si } x = q \cdot y + r \text{ con } 0 \le r &lt; y \;\Rightarrow\; \operatorname{mcd}(x, y) = \operatorname{mcd}(y, r) \\
&amp;b)\operatorname{mcd}(0, x) = x.
\end{align*}\]</div>
<p>Tanto a) como b) son sencillos de probar con la definición de mcd. Observar  que a) es una generalización del a) anterior, pues <span class="math notranslate nohighlight">\(r = x - q \cdot y\)</span>,  es decir <span class="math notranslate nohighlight">\(r\)</span> es <span class="math notranslate nohighlight">\(x\)</span> restando <span class="math notranslate nohighlight">\(q\)</span> veces <span class="math notranslate nohighlight">\(y\)</span>.</p>
<p>La implementación del algoritmo es más sencilla que en método anterior y el invariante es muy parecido:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">mcd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="c1"># pre: (a &gt;= 0 and b &gt;=0) and (b != 0).</span>
    <span class="c1"># post: devuelve el mdc de a y b</span>
    <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span>
    <span class="c1"># 1. invariante: mcd(a, b) = mcd(i, j)</span>
    <span class="k">while</span> <span class="n">j</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">resto</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="n">j</span>  <span class="c1"># i = q * j + resto</span>
        <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="n">j</span><span class="p">,</span> <span class="n">resto</span>
        <span class="c1"># 2. invariante: mcd(a, b) = mcd(i, j)</span>
    <span class="k">return</span> <span class="n">i</span>
</pre></div>
</div>
</div>
</div>
<p>Verifiquemos el invariante:</p>
<ol class="arabic simple">
<li><p>Obviamente cuando <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">==</span> <span class="pre">i</span></code> y <code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">==</span> <span class="pre">j</span></code> (linea 4) obtenemos <code class="docutils literal notranslate"><span class="pre">mcd(a,</span> <span class="pre">b)</span> <span class="pre">==</span> <span class="pre">mcd(i,</span> <span class="pre">j)</span></code>.</p></li>
<li><p>Sean <code class="docutils literal notranslate"><span class="pre">i0</span></code>, <code class="docutils literal notranslate"><span class="pre">j0</span></code> los valores de ingreso de <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j</span></code> al ciclo <code class="docutils literal notranslate"><span class="pre">while</span></code>. Al finalizar el ciclo, <code class="docutils literal notranslate"><span class="pre">i</span></code>, <code class="docutils literal notranslate"><span class="pre">j</span></code> toman nuevos valores <code class="docutils literal notranslate"><span class="pre">i1</span> <span class="pre">=</span> <span class="pre">j0</span></code>, <code class="docutils literal notranslate"><span class="pre">j1</span> <span class="pre">=</span> <span class="pre">i0</span> <span class="pre">-</span> <span class="pre">q</span> <span class="pre">*</span> <span class="pre">j0</span></code>, luego  <code class="docutils literal notranslate"><span class="pre">mcd(a,</span> <span class="pre">b)</span> <span class="pre">==</span> <span class="pre">mcd(i0,</span> <span class="pre">j0)</span> <span class="pre">==</span> <span class="pre">mcd(q</span> <span class="pre">*</span> <span class="pre">j0</span> <span class="pre">+</span> <span class="pre">j1,</span> <span class="pre">i1)</span></code>. Por b), <code class="docutils literal notranslate"><span class="pre">mcd(q</span> <span class="pre">*</span> <span class="pre">j0</span> <span class="pre">+</span> <span class="pre">j1,</span> <span class="pre">i1)</span> <span class="pre">==</span> <span class="pre">mcd(i1,</span> <span class="pre">j1)</span></code>. Concluimos entonces que <code class="docutils literal notranslate"><span class="pre">mcd(a,</span> <span class="pre">b)</span> <span class="pre">==</span> <span class="pre">mcd(i1,</span> <span class="pre">j1)</span></code>.</p></li>
</ol>
<p>Cuando el ciclo termina vale <code class="docutils literal notranslate"><span class="pre">mcd(a,</span> <span class="pre">b)</span> <span class="pre">==</span> <span class="pre">mcd(i,</span> <span class="pre">j)</span></code> y <code class="docutils literal notranslate"><span class="pre">j</span> <span class="pre">==</span> <span class="pre">0</span></code>, luego <code class="docutils literal notranslate"><span class="pre">mcd(a,</span> <span class="pre">b)</span> <span class="pre">==</span> <span class="pre">mcd(i,</span> <span class="pre">0)</span> <span class="pre">==</span> <span class="pre">i</span></code>.</p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="desarrollo-en-base-b-ge-2-de-numeros-enteros">
<h1>Desarrollo en base <span class="math notranslate nohighlight">\(b \ge 2\)</span> de números enteros<a class="headerlink" href="#desarrollo-en-base-b-ge-2-de-numeros-enteros" title="Permalink to this heading">#</a></h1>
<p>Dado <span class="math notranslate nohighlight">\(b\)</span> entero y <span class="math notranslate nohighlight">\(b \ge 2\)</span>, un número entero positivo <span class="math notranslate nohighlight">\(n\)</span> se puede escribir de una única forma como</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
n = \sum_{i=0}^k a_i b^i = a_kb^k + a_{k-1}b^{k-1} + \cdots + a_1 b + a_0,
\end{equation*}\]</div>
<p>donde <span class="math notranslate nohighlight">\(a_k \ne 0\)</span> y <span class="math notranslate nohighlight">\( 0 \le a_i &lt; b\)</span> (<span class="math notranslate nohighlight">\(0 \le i \le k\)</span>).</p>
<p>En  ese caso escribimos <span class="math notranslate nohighlight">\(n = (a_ka_{k-1} \ldots a_0)_b\)</span>,  que es la <em>representación o desarrollo de <span class="math notranslate nohighlight">\(n\)</span> en base <span class="math notranslate nohighlight">\(b\)</span>.</em></p>
<p>El  algoritmo para obtener el desarrollo de un número en base <span class="math notranslate nohighlight">\(b\)</span> lo explicamos con un ejemplo.</p>
<p><strong>Ejemplo.</strong> Deseamos escribir el número <span class="math notranslate nohighlight">\(407\)</span> con una expresión de la forma</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
407 = r_n5^n +r_{n-1} 5^{n-1}+\cdots + r_1 5 + r_0,
\end{equation*}\]</div>
<p>con <span class="math notranslate nohighlight">\(0 \le r_i &lt; 5\)</span>. La forma de hacerlo  es, primero, dividir el número original y los sucesivos cocientes por <span class="math notranslate nohighlight">\(5\)</span>:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
407 &amp;=5\cdot 81 &amp;+&amp; 2 \tag{B1}\\
81 &amp; = 5\cdot 16 &amp;+&amp; 1  \tag{B2}\\
16 &amp; = 5\cdot 3 &amp;+&amp; 1  \tag{B3}\\
3 &amp; = 5\cdot 0 &amp;+&amp; 3.\tag{B4}
\end{align*}\]</div>
<p>Entonces, el desarrollo en base <span class="math notranslate nohighlight">\(5\)</span> de <span class="math notranslate nohighlight">\(407\)</span> viene dado por los restos de las divisiones sucesiva, leídos en forma ascendente.</p>
<p>En este caso diremos que el desarrollo en base <span class="math notranslate nohighlight">\(5\)</span> de <span class="math notranslate nohighlight">\(407\)</span> es <span class="math notranslate nohighlight">\(3112\)</span> o, resumidamente, <span class="math notranslate nohighlight">\(407 = (3112)_5\)</span>.</p>
<p>La demostración  de que este algoritmo funciona bien no es complicada, pero no la haremos aqui,  donde lo que más nos interesa es implementar correctamente el algoritmo.</p>
<p>Implementaremos ahora el algoritmo que encuentra el desarrollo en base <span class="math notranslate nohighlight">\(b\)</span>  de un  número entro positivo <span class="math notranslate nohighlight">\(n\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">base10_a_baseb</span><span class="p">(</span><span class="n">n</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    pre: n, b enteros n &gt;0, b &gt;2</span>
<span class="sd">    post: devuelve la cadena de n en base b</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">restos</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">q</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="n">q</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">q</span> <span class="o">%</span> <span class="n">b</span>
        <span class="n">q</span> <span class="o">=</span> <span class="n">q</span> <span class="o">//</span> <span class="n">b</span>
        <span class="c1"># print(q, r)</span>
        <span class="n">restos</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="o">+</span> <span class="n">restos</span>
    <span class="k">return</span> <span class="n">restos</span>

<span class="n">base10_a_baseb</span><span class="p">(</span><span class="mi">407</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">base10_a_baseb</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="mi">5</span><span class="o">**</span><span class="mi">10</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;30000000001&#39;
</pre></div>
</div>
</div>
</div>
<p>Demostremos usando invariantes  que este es el algoritmo correcto. ¿Cuál es el invariante? Recordar que debe ser una propiedad que se cumple dentro del ciclo y cuando la guarda (en este caso <code class="docutils literal notranslate"><span class="pre">q</span> <span class="pre">&gt;</span> <span class="pre">0</span></code>)  es falsa,  es decir <code class="docutils literal notranslate"><span class="pre">q</span> <span class="pre">==</span> <span class="pre">0</span></code>, se debe cumplir el resultado,  es decir <code class="docutils literal notranslate"><span class="pre">restos</span></code> debe ser el desarrollo en base <span class="math notranslate nohighlight">\(b\)</span>  de <span class="math notranslate nohighlight">\(n\)</span>.</p>
<p>Observar que  se cumple,</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
(\text{B1}) \quad&amp;\Rightarrow&amp; 407 &amp;=5\cdot 81 + 2 \\
(\text{B2}) \quad&amp;\Rightarrow&amp;  407&amp; = 5^2\cdot 16 + 5\cdot 1 +2 \\
(\text{B3}) \quad&amp;\Rightarrow&amp;  407&amp; = 5^3\cdot  3+ 5^2\cdot 1 + 5\cdot 1 +2
\end{align*}\]</div>
<p>En  general se va a cumplir  que en  el paso <span class="math notranslate nohighlight">\(\text{(Bi)}\)</span></p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
(\text{Bi}) \quad&amp;\Rightarrow&amp; n  &amp;=  a_i b^i + a_{i-1} b^{i-1} + \cdots + a_1 b + a_0
\end{align*}\]</div>
<p>con <span class="math notranslate nohighlight">\(0 \le a_k &lt; b\)</span> para <span class="math notranslate nohighlight">\(0 \le k &lt; i\)</span>. Basandonos en estas observaciones, se propone el invariante</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n = r[0] + r[1]*b + r[2]*b^2 + ... + r[s]*b^s + q*b^(s+1)
</pre></div>
</div>
<p>sonde <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">len(r)</span> <span class="pre">-</span> <span class="pre">1</span></code>. Es fácil ver que este invarainte se cumple antes del ciclo. Por  inducción se puede probar  que el invariante vale al final de cada iteración. Cuando el ciclo <code class="docutils literal notranslate"><span class="pre">while</span></code> termina,  es decir cuando <code class="docutils literal notranslate"><span class="pre">q</span> <span class="pre">=</span> <span class="pre">0</span></code>, obtenemos</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>n = r[0] + r[1]*b + r[2]*b^2 + ... + r[s]*b^s
</pre></div>
</div>
<p>y como  <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">r[i]</span> <span class="pre">&lt;</span> <span class="pre">b</span></code> obtenemos el desarrollo en base <code class="docutils literal notranslate"><span class="pre">b</span></code>.  `</p>
<section id="desarrollo-en-base-b-ge-2-de-numeros-decimales">
<h2>Desarrollo en base <span class="math notranslate nohighlight">\(b \ge 2\)</span> de números decimales<a class="headerlink" href="#desarrollo-en-base-b-ge-2-de-numeros-decimales" title="Permalink to this heading">#</a></h2>
<p>En  forma análoga al resultado para número enteros,  si <span class="math notranslate nohighlight">\(t \in \mathbb R\)</span>, <span class="math notranslate nohighlight">\(t &gt;0\)</span>,</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
t = \sum_{i=-\infty}^k a_i b^i.
\end{equation*}\]</div>
<p>donde <span class="math notranslate nohighlight">\(a_k \ne 0\)</span> y <span class="math notranslate nohighlight">\( 0 \le a_i &lt; b\)</span> (<span class="math notranslate nohighlight">\(-\infty \le i \le k\)</span>).</p>
<p>Luego</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
t = (a_k \ldots a_0. a_{-1} a_{-2} \ldots)_b.
\end{equation*}\]</div>
<p><em>Ejemplos.</em> Escribamos <span class="math notranslate nohighlight">\(0.5\)</span> en base <span class="math notranslate nohighlight">\(2\)</span>.</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
0.5 = \frac{1}{2} = 1\cdot 2^{-1},
\end{equation*}\]</div>
<p>luego <span class="math notranslate nohighlight">\(0.5 = (0.1)_2\)</span>.</p>
<p>¿Qué  número es (en base 10) el número <span class="math notranslate nohighlight">\((0.01)_2\)</span>?</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
(0.01)_2 = 1 \cdot 2^{-2} = 0.25.
\end{equation*}\]</div>
<p>Como ocurre en base <span class="math notranslate nohighlight">\(10\)</span>, algunos números reales pueden requerir un desarrollo infinito. Por ejemplo:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
0.1 =  (0.0001\, 1001\, 1001\, {1001} ....)_2,
\end{equation*}\]</div>
<p>Es decir el desarrollo de base <span class="math notranslate nohighlight">\(2\)</span> de <span class="math notranslate nohighlight">\(0.1\)</span> es <span class="math notranslate nohighlight">\(0.0001\)</span> seguido por infinitas repeticiones de  <span class="math notranslate nohighlight">\(1001\)</span>, lo que se llama el <em>período.</em></p>
<p><em>Observación.</em> Pese a que nuestra creencia es que todo número real se representa de una única forma ¿sabías que <span class="math notranslate nohighlight">\(1 = 0.9999...\)</span>? Veamos una demostración de este hecho   poco intuitivo:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{align*}
     x &amp;= 0.999\ldots \\
   10x &amp;= 9.999\ldots &amp;&amp; \text{(multiplicando por $10$)}\\
   10x &amp;= 9+0.999\ldots &amp;&amp; \\
   10x &amp;= 9 + x &amp;&amp; \text{(por definición de $x$) }\\
   9x &amp;= 9 &amp;&amp; \text{(restando $x$)}\\
    x &amp;= 1 &amp;&amp; \text{(dividiendo por 9)}
\end{align*}\]</div>
<p>De la misma forma podemos demostrar que</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
(1)_2 = (0.11111...)_2.
\end{equation*}\]</div>
<p>También se pueden probar estas igualdades por argumentos analíticos que ustedes verán en las materias de cálculo. Por ejemplo, utilizando la teoría de series (sumas infinitas) se puede probar que</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
1 = \sum_{i=1}^\infty 9/10^i.
\end{equation*}\]</div>
<p>En base 2 tenemos las siguientes representaciones:</p>
<p><span class="math notranslate nohighlight">\(0.1 = (0.0001 1001 1001 1001 ....)_2\)</span></p>
<p><span class="math notranslate nohighlight">\(0.1 + 0.1 = (0.0011 0011 0011 0011 0011 0011 ....)_2\)</span></p>
<p><span class="math notranslate nohighlight">\(0.1 + 0.1 + 0.1 = (0.0100 1100 1100 1100 1100 ....)_2\)</span></p>
<p><span class="math notranslate nohighlight">\(0.1 + 0.1 + 0.1 + 0.1 = (0.0110 0110 0110 0110 ....)_2\)</span></p>
<p><span class="math notranslate nohighlight">\(0.1 + 0.1 + 0.1 + 0.1 + 0.1 = (0.1)_2\)</span>. En este caso es fácil calcular el desarrollo en base <span class="math notranslate nohighlight">\(2\)</span>  de este número, pues es igual a <span class="math notranslate nohighlight">\(0.5 = 1/2 = 2^{-1}\)</span>.</p>
<p>En Python los números se representan internamente en forma binaria y es por eso que ocurren fenómenos “raros” que veremos a continuación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.1
0.2
</pre></div>
</div>
</div>
</div>
<p>Hasta aquí, lo esperable. Pero:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.30000000000000004
</pre></div>
</div>
</div>
</div>
<p>Como se vió en la celda anterior <code class="docutils literal notranslate"><span class="pre">0.1</span> <span class="pre">+</span> <span class="pre">0.1</span> <span class="pre">+</span> <span class="pre">0.1</span></code> no da exactamente <code class="docutils literal notranslate"><span class="pre">0.3</span></code> y eso es por la representación binaria de Python. Después sigue bien:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.4
0.5
</pre></div>
</div>
</div>
</div>
<p>Este tipo de fenómenos puede hacer perder exactitud en cálculos muy sencillos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">-</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Se pierde exactitud en los cálculos: x**2 + y =&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span><span class="s1">&#39;. Debería dar&#39;</span><span class="p">,</span> <span class="mf">0.19</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5.551115123125783e-17
Se pierde exactitud en los cálculos: x**2 + y = 0.19000000000000003 . Debería dar 0.19
</pre></div>
</div>
</div>
</div>
<p>La biblioteca <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> nos permite hacer operaciones con números representados en forma decimal exactas.</p>
<p>Con la biblioteca <code class="docutils literal notranslate"><span class="pre">Decimal</span></code>  <code class="docutils literal notranslate"><span class="pre">0.1</span> <span class="pre">+</span> <span class="pre">0.1</span> <span class="pre">+</span> <span class="pre">0.1</span> <span class="pre">-</span> <span class="pre">0.3</span></code> es exactamente igual a cero. En <code class="docutils literal notranslate"><span class="pre">float</span></code>, el resultado es <code class="docutils literal notranslate"><span class="pre">5.551115123125783e-17</span></code>. Aunque cercanas a cero, las diferencias impiden pruebas de igualdad confiables y las diferencias pueden acumularse. Por estas razones, se recomienda el uso de <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> en aplicaciones de contabilidad con estrictas restricciones de confiabilidad.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="mi">28</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.3&#39;</span><span class="p">))</span>

<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">),</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.1&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Los cálculos son exactos: x**2 + y =&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="p">,</span><span class="s1">&#39;. Debería dar (y da)&#39;</span><span class="p">,</span> <span class="mf">0.19</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1
0.2
0.3
0.4
0.5
0.0
Los cálculos son exactos: x**2 + y = 0.19 . Debería dar (y da) 0.19
</pre></div>
</div>
</div>
</div>
<p>Está claro que es relativamente molesto  codificar usando constantemente la palabra <code class="docutils literal notranslate"><span class="pre">Decimal</span></code>, pero es el precio que se debe pagar para tener precisión razonable. Observar que <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> toma como argumentos cadenas que representan números. También acepta números.</p>
</section>
<section id="series-de-taylor-para-la-exponencial">
<h2>Series de Taylor para la exponencial<a class="headerlink" href="#series-de-taylor-para-la-exponencial" title="Permalink to this heading">#</a></h2>
<p>El número <span class="math notranslate nohighlight">\(e\)</span> se define de la siguiente manera:</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
e = \lim_{n \to \infty} \left( 1 + \frac{1}{n}  \right)^n.
\end{equation*}\]</div>
<p>y</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
e^x = \lim_{n \to \infty} \left( 1 + \frac{1}{n}  \right)^{nx}.
\end{equation*}\]</div>
<p>Definamos en  Python una función que nos de una aproximación de <span class="math notranslate nohighlight">\(e\)</span></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">exp_0</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="c1"># pre: n entero &gt; 0</span>
    <span class="c1"># post: devuelve (1 + 1/n)**n</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">n</span><span class="p">)</span><span class="o">**</span><span class="n">n</span>
</pre></div>
</div>
</div>
</div>
<p>Hagamos algunas pruebas</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">40</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;:&#39;</span><span class="p">,</span><span class="n">exp_0</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1 : 2.0
2 : 2.25
3 : 2.37037037037037
4 : 2.44140625
5 : 2.4883199999999994
6 : 2.5216263717421135
7 : 2.546499697040712
8 : 2.565784513950348
9 : 2.5811747917131984
10 : 2.5937424601000023
11 : 2.6041990118975287
12 : 2.613035290224676
13 : 2.6206008878857308
14 : 2.6271515563008685
15 : 2.6328787177279187
16 : 2.6379284973666
17 : 2.64241437518311
18 : 2.6464258210976865
19 : 2.650034326640442
20 : 2.653297705144422
21 : 2.656263213926108
22 : 2.658969858537786
23 : 2.6614501186387796
24 : 2.663731258068599
25 : 2.665836331487422
26 : 2.6677849665337465
27 : 2.6695939778125704
28 : 2.6712778534408463
29 : 2.6728491439808066
30 : 2.6743187758703026
31 : 2.6756963059146854
32 : 2.676990129378183
33 : 2.678207651253779
34 : 2.6793554280957674
35 : 2.6804392861534603
36 : 2.6814644203008586
37 : 2.6824354773085255
38 : 2.6833566262745787
39 : 2.6842316184670922
</pre></div>
</div>
</div>
</div>
<p>El  número <span class="math notranslate nohighlight">\(e\)</span> es <span class="math notranslate nohighlight">\(2,71828...\)</span> y observamos que con la función anterior no nos acercamos razonablemente rápido.</p>
<p>El desarrollo decimal de  <span class="math notranslate nohighlight">\(e\)</span> hasta 50 dígitos  es <span class="math notranslate nohighlight">\(e \sim 2.71828182845904523536028747135266249775724709369995957496696762772\)</span>. Por otro lado la biblioteca <code class="docutils literal notranslate"><span class="pre">math</span></code> provee <code class="docutils literal notranslate"><span class="pre">math.e</span></code>una aproximación al nùmero <code class="docutils literal notranslate"><span class="pre">e</span></code> y si hacemos</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">math</span><span class="o">.</span><span class="n">e</span> <span class="o">-</span> <span class="mf">2.71828182845904523536028747135266249775724709369995957496696762772</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.0
</pre></div>
</div>
</div>
</div>
<p>nos devuelve 0. Es decir,  como era de suponerse, <code class="docutils literal notranslate"><span class="pre">math.e</span></code> es una aproximación muy precisa de <span class="math notranslate nohighlight">\(e\)</span>.</p>
<p>Una forma alternativa de calcular <span class="math notranslate nohighlight">\(e\)</span> es con la serie de Taylor,</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
e = \sum_{i=0}^{\infty} \frac1{i!}.
\end{equation*}\]</div>
<p>y</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
e^x = \sum_{i=0}^{\infty} \frac1{i!}x^i.
\end{equation*}\]</div>
<p>Luego,  una aproximación de <span class="math notranslate nohighlight">\(e^x\)</span>, de grado <span class="math notranslate nohighlight">\(n\)</span> es</p>
<div class="amsmath math notranslate nohighlight">
\[\begin{equation*}
e^x = \sum_{i=0}^{n} \frac1{i!}x^i.
\end{equation*}\]</div>
<p>Esta forma,  como veremos, aproxima en pocos pasos mucho mejor que la fórmula que define a <span class="math notranslate nohighlight">\(e\)</span>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">exp</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
  <span class="c1"># Calcula la serie de Taylor de e**x hasta grado n</span>
  <span class="c1"># e**x = \sum_{n=0}^\infty x**n / n!</span>
  <span class="n">ex</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">ex</span> <span class="o">=</span> <span class="n">ex</span> <span class="o">+</span> <span class="n">x</span><span class="o">**</span><span class="n">i</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">ex</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Aproximación de e (e**1):&#39;</span><span class="p">,</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="c1">#</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;e provisto por math:&#39;</span><span class="p">,</span><span class="n">math</span><span class="o">.</span><span class="n">e</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Diferencia entre la aproximación y el e de math:&#39;</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">e</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Aproximación de e (e**1): 2.7182818011463845
e provisto por math: 2.718281828459045
Diferencia entre la aproximación y el e de math: 2.7312660577649694e-08
</pre></div>
</div>
</div>
</div>
<p>Podemos mejorar la precisión con <code class="docutils literal notranslate"><span class="pre">Decimal</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">getcontext</span><span class="p">()</span><span class="o">.</span><span class="n">prec</span> <span class="o">=</span> <span class="mi">50</span> <span class="c1"># precisión hasta 50 dígitos</span>

<span class="k">def</span> <span class="nf">expD</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
  <span class="c1"># Calcula la serie de Taylor de e**x hasta grado n</span>
  <span class="c1"># e**x = \sum_{n=0}^\infty x**n / n!</span>
  <span class="n">aprox_ex</span> <span class="o">=</span> <span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">)</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">aprox_ex</span> <span class="o">=</span> <span class="n">aprox_ex</span> <span class="o">+</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span><span class="o">**</span><span class="n">i</span> <span class="o">/</span> <span class="n">Decimal</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
  <span class="k">return</span> <span class="n">aprox_ex</span>

<span class="c1"># Observación: debemos poner Decimal(str(x)) pues, aunque Decimal acepta float,</span>
<span class="c1">#    para preservar la precisión se deben ingresar números como strings.</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Aproximación de e con Decimal:&#39;</span><span class="p">,</span><span class="n">Decimal</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Diferencia entre la aproximación con Decimal y sin Decimal:&#39;</span><span class="p">,</span><span class="n">Decimal</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span><span class="o">-</span> <span class="n">expD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span> <span class="c1"># varían a partir de decimal 16</span>
<span class="c1"># Observación: la expresión print(exp(1,10)- expD(1,10)) nos devuelve error pues</span>
<span class="c1">#   exp(1,10) es float y expD(1,10) es decimal.Decimal</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Diferencia entre la aproximación y el e de math:&#39;</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">e</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Diferencia entre la aproximación con Decimal y el e de math:&#39;</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">expD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="o">-</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">e</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Aproximación de e con Decimal: 2.718281801146384513145903838449157774448394775390625
Diferencia entre la aproximación con Decimal y sin Decimal: 3.3428090787302773294730581724244225E-17
Diferencia entre la aproximación y el e de math: 2.7312660577649694e-08
Diferencia entre la aproximación con Decimal y el e de math: 2.7312660611077785247281264362616934263306725E-8
</pre></div>
</div>
</div>
</div>
<p>Ahora aproximemos con 20 sumandos de la serie de Taylor:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Aproximación de e con Decimal:&#39;</span><span class="p">,</span><span class="n">Decimal</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Diferencia entre la aproximación con Decimal y sin Decimal:&#39;</span><span class="p">,</span><span class="n">Decimal</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span><span class="o">-</span> <span class="n">expD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Diferencia entre la aproximación y el e de math:&#39;</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">e</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Diferencia entre la aproximación con Decimal y el e de math:&#39;</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">expD</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span> <span class="o">-</span> <span class="n">Decimal</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">e</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Aproximación de e con Decimal: 2.71828182845904553488480814849026501178741455078125
Diferencia entre la aproximación con Decimal y sin Decimal: 2.9954502365782384912564101111624105E-16
Diferencia entre la aproximación y el e de math: 4.440892098500626e-16
Diferencia entre la aproximación con Decimal y el e de math: 1.44544186192238767043811656120087075E-16
</pre></div>
</div>
</div>
</div>
<p>Mejora un poco la aproximación con <code class="docutils literal notranslate"><span class="pre">Decimal</span></code>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="10_Diccionarios_y_conjuntos.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">10. Dicionarios y conjuntos</p>
      </div>
    </a>
    <a class="right-next"
       href="12_Recursion.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">12. Recursión</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">11. Invariantes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#razonando-sobre-programas-correccion-parcial">1. Razonando sobre programas: Corrección parcial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">2. Invariantes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-es-primo">3. Ejemplo: ¿es primo?</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-maximo-comun-divisor">4. Ejemplo: máximo común divisor</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#algoritmo-de-euclides">Algoritmo de Euclides</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#desarrollo-en-base-b-ge-2-de-numeros-enteros">Desarrollo en base <span class="math notranslate nohighlight">\(b \ge 2\)</span> de números enteros</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#desarrollo-en-base-b-ge-2-de-numeros-decimales">Desarrollo en base <span class="math notranslate nohighlight">\(b \ge 2\)</span> de números decimales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#series-de-taylor-para-la-exponencial">Series de Taylor para la exponencial</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Alejandro Tiraboschi
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>